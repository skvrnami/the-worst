<html>
<head>
    <title>The Worst Thing Ever to Happen to Music</title>
    <link rel="stylesheet" type="text/css" href="style.css">
    <link href="https://fonts.googleapis.com/css?family=Fira+Sans&display=swap" rel="stylesheet"> 
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.2.0/papaparse.min.js"></script> 
    <script src="playlist.js"></script>
    <script>
    
    function generatePlaylist() {

        Papa.parse("sample-data.csv", {
        download: true,
        complete: function(results, file) {

            var n = parseInt(document.getElementById("tracks").value)
            var stations = [];
            var genres = [];
            if(document.getElementById("RZ").checked){
                stations.push("radiozurnal")
            }

            if(document.getElementById("DJ").checked){
                stations.push("dvojka")
            }

            if(document.getElementById("RW").checked){
                stations.push("radiowave")
            }

            if(document.getElementById("JAZZ").checked){
                stations.push("jazz")
            }

            if(document.getElementById("JUNIOR").checked){
                stations.push("radiojunior")
            }

                        if(document.getElementById("REGION").checked){
                stations.push("region")
            }

            if(document.getElementById("pop").checked){
                genres.push("pop")
            }

            if(document.getElementById("rock").checked){
                genres.push("rock")
            }

            if(document.getElementById("electro").checked){
                genres.push("electronic")
            }

            if(document.getElementById("jazz").checked){
                genres.push("jazz")
            }

            if(document.getElementById("hiphop").checked){
                genres.push("hip-hop")
            }

            if(document.getElementById("core").checked){
                genres.push("*core")
            }

            if(document.getElementById("hiphop").checked){
                genres.push("hip-hop")
            }

            if(document.getElementById("classic").checked){
                genres.push("classical")
            }


            var filteredData = results["data"].filter(function(x) {return stations.indexOf(x[0]) >= 0})
            var data = filteredData.filter(function(x) {return genres.indexOf(x[2]) >= 0})
            
            var playlist = getRandomSubarray(data, n);

            appendPlaylist(playlist, "playlist");
            
        }})
    };
    </script>
</head>
<body>
    <div class="content">
        <div class="box">
        <h1>The Worst Thing Ever to Happen to Music</h1>
        <p>Vygeneruj si náhodný playlist ze skladeb, které zazněly ve vysílání stanic Českého rozhlasu od&nbsp;29.&nbsp;listopadu 2020. Aspoň podle dat dostupných <a href="https://data.irozhlas.cz/opendata/">tady</a>.</p>
        <p><i>"The worst thing ever to happen to music"</i> je jedno z označení žánru, který podle <a href="https://www.last.fm/">last.fm</a> provozuje Helena Vondráčková. A generování náhodných playlistů ze skladeb hraných na stanicích ČRo asi taky není nejlepší nápad. Ale co už. </p>
        </div>
        <div class="box">
                <p>
                <b>Zvol počet skladeb:</b><br>
                <input type="number" value="8" id="tracks"><br>
                </p>
                <p>
                <b>Zvol stanice:</b><br>
                    <table>
                        <tr>
                            <td>
                            <input type="checkbox" id="RZ" value="RZ">Radiožurnál
                            </td>
                            <td>
                            <input type="checkbox" id="DJ" value="DJ">Dvojka
                            </td>
                            <td> 
                            <input type="checkbox" id="RW" value="RW" checked>Radio Wave
                            </td>
                        </tr>
                        <tr>
                            <td>
                            <input type="checkbox" id="JAZZ" value="JZ">Jazz
                            </td>
                            <td>
                            <input type="checkbox" id="JUNIOR" value="RJ">Junior
                            </td>
                            <td>
                            <input type="checkbox" id="REGION" value="RG">Regionální stanice
                            </td>
                        </tr>
                    </table>
                </p>
                <p>
                <b>Zvol žánr:</b><br>
                <span class="note">Podle dat ze Spotify</a></span>
                    <table>
                        <tr>
                            <td>
                            <input type="checkbox" id="pop" value="pop" checked>pop
                            </td>
                            <td>
                            <input type="checkbox" id="rock" value="rock" checked>rock
                            </td>
                            <td> 
                            <input type="checkbox" id="electro" value="electronic" checked>electro
                            </td>
                            <td> 
                            <input type="checkbox" id="jazz" value="jazz" checked>jazz
                            </td>
                        </tr>
                        <tr>
                            <td>
                            <input type="checkbox" id="hiphop" value="hip-hop" checked>hip-hop
                            </td>
                            <td>
                            <input type="checkbox" id="classic" value="classical" checked>classical
                            </td>
                            <td>
                            <input type="checkbox" id="core" value="*core" checked>*core
                            </td>
                            <td> 
                            <input type="checkbox" id="other" value="other" checked>ostatní/neznámý
                            </td>
                        </tr>
                    </table>
                </p>

                <button onclick="generatePlaylist();">Vygeneruj playlist</button>
        </div>
        <div class="box" id="playlist">
        </div>
        <div class="box" id="footer">
        <p>
        <a href="/morbid.html">morbidní verze</a><br>
        vytvořeno <a href="https://twitter.com/skvrnami/">@skvrnami</a> na <a href="https://hackujstat.cz/">#hackujstat</a></p>
    </div>
    </div>
    
</body>

</html>